# Edge Release - Builds on every push to main
# Use case: Continuous deployment for testing/staging environments
# Tags produced: edge-{branch} (e.g., edge-main)
name: Edge Release

on:
  push:
    branches:
      - main

permissions:
  contents: read
  packages: write

jobs:
  build:
    uses: ./.github/workflows/service_docker-build-and-publish.yml
    with:
      docker-tags: "shpcr.io/selfhostpro/demo-app:edge-${{ github.ref_name }}"
      dockerfile: "./Dockerfile.php"
      environment: edge
      version: "edge-${{ github.ref_name }}"
    secrets: inherit
